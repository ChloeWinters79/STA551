---
title: "EDA and Data Visualization on Breast Cancer Data"
author: "Chlo√© Winters"
date: "2025-09-24"
output:
  html_document:
    toc: yes
    toc_float: yes
    toc_depth: 4
    fig_width: 6
    fig_height: 4
    fig_caption: yes
    number_sections: yes
    toc_collapsed: yes
    code_folding: hide
    code_download: yes
    smooth_scroll: yes
    theme: lumen
  pdf_document: 
    toc: yes
    toc_depth: 4
    fig_caption: yes
    number_sections: yes
  word_document:
    toc: yes
    toc_depth: '4'
---

<style type="text/css">
h1.title {
  font-size: 20px;
  color: DarkRed;
  text-align: center;
}
h4.author { /* Header 4 - and the author and data headers use this too  */
    font-size: 18px;
  font-family: "Times New Roman", Times, serif;
  color: DarkRed;
  text-align: center;
}
h4.date { /* Header 4 - and the author and data headers use this too  */
  font-size: 18px;
  font-family: "Times New Roman", Times, serif;
  color: DarkBlue;
  text-align: center;
}
h1 { /* Header 3 - and the author and data headers use this too  */
    font-size: 22px;
    font-family: "Times New Roman", Times, serif;
    color: darkred;
    text-align: center;
}
h2 { /* Header 3 - and the author and data headers use this too  */
    font-size: 18px;
    font-family: "Times New Roman", Times, serif;
    color: navy;
    text-align: left;
}

h3 { /* Header 3 - and the author and data headers use this too  */
    font-size: 15px;
    font-family: "Times New Roman", Times, serif;
    color: navy;
    text-align: left;
}

h4 { /* Header 4 - and the author and data headers use this too  */
    font-size: 18px;
    font-family: "Times New Roman", Times, serif;
    color: darkred;
    text-align: left;
}
</style>



```{r setup, include=FALSE}
# code chunk specifies whether the R code, warnings, and output 
# will be included in the output files.
library(knitr)
knitr::opts_chunk$set(echo = TRUE,           # include code chunk in the output file
                      warnings = FALSE,       # sometimes, you code may produce warning messages,
                                              # you can choose to include the warning messages in
                                              # the output file. 
                      results = TRUE          # you can also decide whether to include the output
                                              # in the output file.
                      )   



library(knitr)
library(pander)
library(mlbench)
library(dplyr)
library(readr)
library(stringr)
library(purrr)
library(ggcorrplot)
library(GGally)
library(ggplot2)
library(gridExtra)

knitr::opts_chunk$set(echo = TRUE,      
                      warnings = FALSE,   
                      messages = FALSE,  
                      results = TRUE,
                      comment = NA
                      )   

```


# Introduction

In this assignment there will be exploratory data analysis conducted on a synthetic breast cancer data set. Exploratory data analysis allows for a better understanding of the data set and its variables before moving onto the modeling process, which will be covered in the next assignment. 

# Materials 

## Data Set

According to the World Health Organization (WHO) breast cancer is one of the most common cancers for women worldwide, and is the second leading cause of cancer related deaths in women. This makes identifying breast cancer in women so important because the sooner you start treating a patient the better. 

```{r}
url ="https://chloewinters79.github.io/STA551/Data/syntheticBreastCancerData.csv"
cancer = read.csv(url, header = TRUE)
```

The data set being used for this assignment is a synthetic breast cancer data set, there are 600 observations in the data set and it consists of 11 variables, 10 of them are numerical and 1 of them is categorical. The 11 variables are detailed below,

1. Sample_No: (num) unique identifier
2. Thickness_of_Clump: (num) Benign cells are more likely monolayers and malignant or cancerous cells are multilayer
3. Cell_Size_Uniformity: (num) Benign cells does not vary in size and malignant or cancer cell vary in size
4. Cell_Shape_Uniformity: (num) Benign cells do not vary in shape, while malignant or cancerous cells vary in shape
5. Marginal_Adhesion: (num) Benign cells are more likely to stick together, while malignant or cancerous cells are loose or do not stick together
6. Single_Epithelial_Cell_Size: (num) In benign cases epithelial cells are normal in size, while in malignant or cancerous cases they are significantly enlarged
7. Bare_Nuclei: (num) In benign cases the bare nuclei are not surrounded by cytoplasm, while in malignant or cancerous cases they are surrounded by cytoplasm
8. Bland_Chromatin: (num) Benign cells have uniform or fine chromatin, while malignant or cancerous cells have coarse chromatin
9. Normal_Nucleoli: (num) In benign cases nucleoli are very small, while in malignant or cancerous cases nucleoli are more prominent
10. Mitoses: (num) In benign cases cell growth is normal, while in malignant or cancerous cases there is abnormal cell growth
11. Outcome: (cat) "No" denotes benign breast cancer, "Yes" denotes malignant breast cancer

It should be noted that while numeric, variables 2 - 10 are integers from 1-10.

# Methodology and Analysis

Now that the data set has been load in it is time to conduct the exploratory data analysis, the exploratory data analysis will cover the distributions of all variables with the exception of the Sample_No variable since that is solely used as a unique identifier for each observation. There will also be an investigation into the relationship between variables with pairwise comparison. 

## Expoloratory Data Analysis

First we are going to look at the summary information of the data set. Looking at the variables most of their means seem to be in the 3-5 range, with Mitoses having the lowest mean at 2.093, and Thickness_of_Clump having the largest mean at 5.41. There does seem to be some indication of right skewness with a majority of the variables, however, we will wait to look at some visual representation before making any final conclusions. A table for the categorical variable outcome was also created, there are 380 No observations, which are observations where the cancer was benign and 220 Yes observations, where the cancer was malignant. While this is not a 50/50 split, it is almost a 60/40 split, which is not skewed heavily enough in either direction that there seems to be any cause for cancer at this point. 

```{r}
summary(cancer)
table(cancer$Outcome)
```
Moving onto a visual analysis of the variables, histograms were created for the following variables, Thickness_of_Clump, Cell_Size_Uniformity, Cell_Shape_Uniformity, Marginal_Adhesion, Single_Epithelial_Cell_Size, Bare_Nuclei, Bland_Chromatin, Normal_Nucleoli, and Mitosis. Looking at the output none of the variables appear to have a normal distribution. With the exception of the Thickness_of_Clump variable having a potential uniform distribution, all the other variables have a right skewness, with the variable Mitoses having the most severe skewness. The variables Normal_Nucleoli, Bare_Nuclei, Cell_Shape_Uniformity, Cell_Size_Uniformity, and Marginal_Adhesions having slightly less severe right skewness than Mitosis, but more severe than Single_Epithelial_Cell_Size and Bland_Chromatin, which while the least severe, are still clearly exhibiting a right skewness. 


```{r}

par(mfrow = c(2,2))

hist(cancer$Thickness_of_Clump, main = "Distribution of Clump Thickness")
hist(cancer$Cell_Size_Uniformity, main = "Distribution of Cell Size Uniformity")
hist(cancer$Cell_Shape_Uniformity, main = "Distribution of Cell Shape Uniformity")

hist(cancer$Marginal_Adhesion, main = "Distribution of Marginal Adhesion")
hist(cancer$Single_Epithelial_Cell_Size, main = "Distribution of Single Epithelial Cell Size")
hist(cancer$Bare_Nuclei, main = "Distribution of Bare Nuclei")

hist(cancer$Bland_Chromatin, main = "Distribution of Bland Chromatin")
hist(cancer$Normal_Nucleoli, main = "Distribution of Normal Nucleoli")
hist(cancer$Mitoses, main = "Distribution of Mitoses")
```
Next box plots were created to look at the relationship between the numerical variables and the outcome variable. Looking at the output it appears that for all the variables the "No" outcome was consistent with the right skewness seen in the histograms above. When looking at the output for all the variables with the "Yes" outcome with the exception of the Mitoses variable all the "Yes" outcomes are showing a left skewness, the Mitoses variable shows right skewness. None of the boxplots show a normal distribution, all boxplots show either right or left skewness. 

```{r}

# Make individual plots
p1 <- ggplot(cancer, aes(x = Outcome, y = Thickness_of_Clump, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Clump Thickness by Outcome", y = "Clump Thickness") +
  theme_minimal()

p2 <- ggplot(cancer, aes(x = Outcome, y = Cell_Size_Uniformity, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Cell Size Uniformity by Outcome", y = "Cell Size Uniformity") +
  theme_minimal()

p3 <- ggplot(cancer, aes(x = Outcome, y = Cell_Shape_Uniformity, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Cell Shape Uniformity by Outcome", y = "Cell Shape Uniformity") +
  theme_minimal()

p4 <- ggplot(cancer, aes(x = Outcome, y = Marginal_Adhesion, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Marginal Adhesion by Outcome", y = "Marginal Adhesion") +
  theme_minimal()

p5 <- ggplot(cancer, aes(x = Outcome, y = Single_Epithelial_Cell_Size, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Single Epithelial Cell Size by Outcome", y = "Single Epithelial Cell Size") +
  theme_minimal()

p6 <- ggplot(cancer, aes(x = Outcome, y = Bare_Nuclei, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Bare Nuclei by Outcome", y = "Bare Nuclei") +
  theme_minimal()

p7 <- ggplot(cancer, aes(x = Outcome, y = Bland_Chromatin, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Bland Chromatin by Outcome", y = "Bland Chromatin") +
  theme_minimal()

p8 <- ggplot(cancer, aes(x = Outcome, y = Normal_Nucleoli, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Normal Nucleoli by Outcome", y = "Normal Nucleoli") +
  theme_minimal()

p9 <- ggplot(cancer, aes(x = Outcome, y = Mitoses, fill = Outcome)) +
  geom_boxplot(alpha = 0.7) +
  labs(title = "Mitoses by Outcome", y = "Mitoses") +
  theme_minimal()

# Arrange into pages (2x2 layout per page)
grid.arrange(p1, p2, p3, p4, ncol = 2)   # Page 1
grid.arrange(p5, p6, p7, p8, ncol = 2)   # Page 2
grid.arrange(p9, ncol = 1)               # Page 3


```
Considering that all the numerical variables are integers between 1-10 a traditional pairwise graph does not make sense because it would be quite cluttered and correlation is harder to determine in those kinds of plots when the data is not continuous. To ensure we are still able to look at the correlation between variables, it made sense to do a correlation heat map to analyze the relationship between the numerical variables. Cell_Size_Uniformity and Cell_Shape_Uniformity are the most highly correlated variables with a correlation of 0.84, which is considered a strong correlation. Considering both these variables deal with a type of cell uniformity it does make sense that they would be highly correlated. There are also 16 pairings in the 0.60 - 0.71 range which would be considered strong correlation. Additionally, only 4 pairing are under 0.40 which anything under 0.40 would either be considered weak or very weak, no correlation. 

```{r}
# Pearson correlation matrix
corr_mat_pearson <- cor(cancer[ ,2:10], method = "pearson")

# Pearson correlation heatmap
ggcorrplot(corr_mat_pearson, 
           hc.order = TRUE,
           type = "lower",
           lab = TRUE,
           lab_size = 3,
           method = "square",
           colors = c("blue", "white", "red"),
           title = "Pearson Correlation Heatmap of Predictors",
           ggtheme = theme_minimal)
```
After creating and analyzing the heat map of the numeric variables there appears to have been a sufficient amount of exploratory data analysis has been conducted on the data and it is time to move into final conclusions and general discussions regarding the data set.   

# Results and Conclusions

Overall, looking at the data set none of the numeric variables have a normal distribution. When looking at the variables as a whole in the histograms there is very clear right skewness of the variables. However, when breaking down the variables by outcome, while the skewness for the No outcomes was similar to the overall distribution of the variable, the Yes outcomes had an opposite skewness for the most part. The one exception was the Mitoses variable which had both outcomes showcasing a right skewness. It was quite surprising to see the left skewness show so heavily in the outcome box plots considering the histograms of the overall distribution which includes yes and no outcomes. While the outcomes were not a 50/50 split, it was a 60/40 split with more no outcomes than yes outcomes, to see the overall skew so strongly to the right with 40% of the data showing a right hand skew in the variable breakdown is interesting. 

# General Discussion

The box plots showed the most potential for questions and exploration in the model building process. With the outcomes having almost opposite skewness for each variable there is potential that the variables could be highly useful in predicting the outcome of the tumor. Considering outcome is indicative of whether or not a tumor is benign or malignant, if a model with strong predictive power and strong accuracy could be created it would be a highly useful model. Being able to have a very strong model for determining the status of a tumor in the breast is very important and could be responsible for saving peoples lives, so I think considering these variables in model building would be a good use of time. 

# References

WHO. (2025, August 14). Breast cancer. World Health Organization. https://www.who.int/news-room/fact-sheets/detail/breast-cancer
